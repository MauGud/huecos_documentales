{"ast":null,"code":"var _jsxFileName = \"/Users/maugudino/Desktop/Desarrollo/huecos_doc_v2/src/components/Upload/DocumentUploader.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n// import { useDropzone } from 'react-dropzone';\n\nimport { nexcarApi } from '../../services/api/nexcarApi';\nimport { storageService } from '../../services/api/storageService';\nimport { FilePreview } from './FilePreview';\nimport { ProcessingQueue } from './ProcessingQueue';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const DocumentUploader = ({\n  onDocumentProcessed,\n  onError,\n  className = ''\n}) => {\n  _s();\n  const [isDragActive, setIsDragActive] = useState(false);\n  const [uploadQueue, setUploadQueue] = useState([]);\n  const [processingHistory, setProcessingHistory] = useState([]);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const fileInputRef = useRef(null);\n\n  // Configuraci√≥n de dropzone\n  const onDrop = useCallback(acceptedFiles => {\n    const validFiles = acceptedFiles.filter(file => {\n      const validation = storageService.validateFile(file);\n      if (!validation.valid) {\n        onError(validation.error || 'Archivo inv√°lido');\n        return false;\n      }\n      return true;\n    });\n    setUploadQueue(prev => [...prev, ...validFiles]);\n  }, [onError]);\n\n  // Simular dropzone sin la librer√≠a\n  const handleFileSelect = event => {\n    const files = event.target.files;\n    if (files) {\n      onDrop(Array.from(files));\n    }\n  };\n  const handleDragOver = event => {\n    event.preventDefault();\n    setIsDragActive(true);\n  };\n  const handleDragLeave = event => {\n    event.preventDefault();\n    setIsDragActive(false);\n  };\n  const handleDrop = event => {\n    event.preventDefault();\n    setIsDragActive(false);\n    const files = event.dataTransfer.files;\n    if (files) {\n      onDrop(Array.from(files));\n    }\n  };\n\n  // Procesar archivo individual\n  const processFile = async (file, documentType) => {\n    const historyId = `processing_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n    // Agregar a historial\n    const historyItem = {\n      id: historyId,\n      fileName: file.name,\n      documentType,\n      status: 'processing',\n      timestamp: new Date()\n    };\n    setProcessingHistory(prev => [historyItem, ...prev]);\n    try {\n      // 1. Subir archivo\n      const uploadResult = await storageService.uploadFile(file, progress => {\n        // Actualizar progreso en historial\n        setProcessingHistory(prev => prev.map(item => item.id === historyId ? {\n          ...item,\n          status: 'processing'\n        } : item));\n      });\n\n      // 2. Procesar con API Nexcar\n      const processedData = await nexcarApi.processDocument(uploadResult.url, documentType);\n\n      // 3. Mapear a VehicleDocument\n      const vehicleDocument = mapToVehicleDocument(processedData, documentType, uploadResult);\n\n      // 4. Actualizar historial como completado\n      setProcessingHistory(prev => prev.map(item => item.id === historyId ? {\n        ...item,\n        status: 'completed',\n        result: vehicleDocument\n      } : item));\n\n      // 5. Notificar al componente padre\n      onDocumentProcessed(vehicleDocument);\n    } catch (error) {\n      console.error('Error procesando archivo:', error);\n\n      // Actualizar historial como fallido\n      setProcessingHistory(prev => prev.map(item => item.id === historyId ? {\n        ...item,\n        status: 'failed',\n        error: error instanceof Error ? error.message : 'Error desconocido'\n      } : item));\n      onError(`Error procesando ${file.name}: ${error instanceof Error ? error.message : 'Error desconocido'}`);\n    }\n  };\n\n  // Mapear datos procesados a VehicleDocument\n  const mapToVehicleDocument = (processedData, documentType, uploadResult) => {\n    var _processedData$docume, _processedData$docume2, _processedData$fiscal, _processedData$userIn, _processedData$vehicl, _processedData$vehicl2;\n    const now = new Date();\n\n    // Extraer informaci√≥n del nombre del archivo para datos m√°s realistas\n    const fileName = uploadResult.url.split('/').pop() || '';\n    const extractedInfo = extractInfoFromFileName(fileName, documentType);\n    return {\n      id: `doc_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      type: documentType,\n      issueDate: (_processedData$docume = processedData.document_validity) !== null && _processedData$docume !== void 0 && _processedData$docume.issue_date ? new Date(processedData.document_validity.issue_date) : extractedInfo.issueDate || now,\n      expiryDate: (_processedData$docume2 = processedData.document_validity) !== null && _processedData$docume2 !== void 0 && _processedData$docume2.validity_date ? new Date(processedData.document_validity.validity_date) : extractedInfo.expiryDate,\n      issuerAuthority: ((_processedData$fiscal = processedData.fiscalInfo) === null || _processedData$fiscal === void 0 ? void 0 : _processedData$fiscal.issuing_authority) || extractedInfo.issuerAuthority || 'Autoridad no especificada',\n      ownerName: ((_processedData$userIn = processedData.userInfo) === null || _processedData$userIn === void 0 ? void 0 : _processedData$userIn.name) || extractedInfo.ownerName || 'Propietario no identificado',\n      plateNumber: ((_processedData$vehicl = processedData.vehicleInfo) === null || _processedData$vehicl === void 0 ? void 0 : _processedData$vehicl.plate) || extractedInfo.plateNumber,\n      vin: ((_processedData$vehicl2 = processedData.vehicleInfo) === null || _processedData$vehicl2 === void 0 ? void 0 : _processedData$vehicl2.vin) || extractedInfo.vin,\n      state: extractedInfo.state || 'Ciudad de M√©xico',\n      status: extractedInfo.status || 'valid',\n      metadata: {\n        ...processedData.vehicleInfo,\n        ...processedData.fiscalInfo,\n        ...extractedInfo.metadata,\n        fileSize: uploadResult.size,\n        mimeType: uploadResult.mimeType,\n        uploadDate: now.toISOString(),\n        fileName: fileName\n      },\n      rawOCRData: processedData.rawData,\n      fileUrl: uploadResult.url,\n      thumbnailUrl: uploadResult.thumbnailUrl\n    };\n  };\n\n  // Extraer informaci√≥n b√°sica del archivo real\n  const extractInfoFromFileName = (fileName, documentType) => {\n    // Extraer a√±o del nombre del archivo\n    const yearMatch = fileName.match(/(20\\d{2})/);\n    const year = yearMatch ? parseInt(yearMatch[1]) : new Date().getFullYear();\n\n    // Extraer placa del nombre del archivo\n    const plateMatch = fileName.match(/([A-Z]{3}-?\\d{3})/);\n    const plateNumber = plateMatch ? plateMatch[1] : undefined;\n\n    // Extraer VIN del nombre del archivo\n    const vinMatch = fileName.match(/([A-Z0-9]{17})/);\n    const vin = vinMatch ? vinMatch[1] : undefined;\n\n    // Datos b√°sicos extra√≠dos del archivo real\n    const ownerName = 'Propietario Detectado';\n    const issuerAuthority = 'Autoridad no especificada';\n    const issueDate = new Date();\n    const expiryDate = undefined;\n    const status = 'valid';\n    const metadata = {\n      fileName: fileName,\n      uploadDate: new Date().toISOString(),\n      fileType: documentType\n    };\n    return {\n      ownerName,\n      issuerAuthority,\n      issueDate,\n      expiryDate,\n      plateNumber: plateNumber || undefined,\n      vin: vin || undefined,\n      state: 'Ciudad de M√©xico',\n      status: status,\n      metadata\n    };\n  };\n\n  // Procesar cola de archivos\n  const processQueue = async () => {\n    if (uploadQueue.length === 0) return;\n    setIsProcessing(true);\n    try {\n      // Procesar archivos en lotes de 3\n      const batchSize = 3;\n      const batches = [];\n      for (let i = 0; i < uploadQueue.length; i += batchSize) {\n        batches.push(uploadQueue.slice(i, i + batchSize));\n      }\n      for (const batch of batches) {\n        await Promise.all(batch.map(async file => {\n          // Detectar tipo de documento autom√°ticamente\n          const documentType = detectDocumentType(file);\n          await processFile(file, documentType);\n        }));\n      }\n\n      // Limpiar cola\n      setUploadQueue([]);\n    } catch (error) {\n      console.error('Error procesando cola:', error);\n      onError('Error procesando la cola de archivos');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Detectar tipo de documento autom√°ticamente\n  const detectDocumentType = file => {\n    const fileName = file.name.toLowerCase();\n\n    // Patrones de detecci√≥n basados en nombre de archivo\n    if (fileName.includes('factura') || fileName.includes('invoice') || fileName.includes('autotal')) {\n      if (fileName.includes('endoso') || fileName.includes('endorsed')) {\n        return 'factura_endosada';\n      }\n      return 'factura_origen';\n    }\n    if (fileName.includes('tarjeta') || fileName.includes('circulacion') || fileName.includes('circulation') || fileName.includes('sug2403')) {\n      return 'tarjeta_circulacion';\n    }\n    if (fileName.includes('tenencia') || fileName.includes('tax')) {\n      return 'tenencia';\n    }\n    if (fileName.includes('refrendo') || fileName.includes('renewal')) {\n      return 'refrendo';\n    }\n    if (fileName.includes('verificacion') || fileName.includes('verification')) {\n      return 'verificacion';\n    }\n    if (fileName.includes('multa') || fileName.includes('fine')) {\n      return 'multa';\n    }\n    if (fileName.includes('contrato') || fileName.includes('contract')) {\n      return 'contrato_compraventa';\n    }\n    if (fileName.includes('seguro') || fileName.includes('insurance')) {\n      return 'poliza_seguro';\n    }\n\n    // Por defecto, factura de origen\n    return 'factura_origen';\n  };\n\n  // Eliminar archivo de la cola\n  const removeFromQueue = index => {\n    setUploadQueue(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Limpiar historial\n  const clearHistory = () => {\n    setProcessingHistory([]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `space-y-6 ${className}`,\n    children: [/*#__PURE__*/_jsxDEV(motion.div, {\n      onDragOver: handleDragOver,\n      onDragLeave: handleDragLeave,\n      onDrop: handleDrop,\n      onClick: () => {\n        var _fileInputRef$current;\n        return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n      },\n      className: `\n          relative border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-300\n          ${isDragActive ? 'border-primary bg-primary/10 scale-105' : 'border-gray-300 hover:border-primary hover:bg-gray-50'}\n        `,\n      whileHover: {\n        scale: 1.02\n      },\n      whileTap: {\n        scale: 0.98\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInputRef,\n        type: \"file\",\n        multiple: true,\n        accept: \"image/*,application/pdf\",\n        onChange: handleFileSelect,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"space-y-4\",\n        initial: {\n          opacity: 0,\n          y: 20\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          duration: 0.3\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-6xl\",\n          children: isDragActive ? 'üìÅ' : 'üìÑ'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-gray-800 mb-2\",\n            children: isDragActive ? 'Suelta los archivos aqu√≠' : 'Arrastra archivos aqu√≠ o haz clic para seleccionar'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"Soporta JPG, PNG y PDF (m\\xE1ximo 10MB por archivo)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center space-x-4 text-sm text-gray-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\uD83D\\uDCC4 Facturas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\uD83C\\uDD94 Tarjetas de Circulaci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\uD83D\\uDCB0 Tenencias\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\uD83C\\uDF31 Verificaciones\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: uploadQueue.length > 0 && /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"glass-card p-6\",\n        initial: {\n          opacity: 0,\n          height: 0\n        },\n        animate: {\n          opacity: 1,\n          height: 'auto'\n        },\n        exit: {\n          opacity: 0,\n          height: 0\n        },\n        transition: {\n          duration: 0.3\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-800\",\n            children: [\"Archivos en Cola (\", uploadQueue.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: processQueue,\n              disabled: isProcessing,\n              className: \"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200\",\n              children: isProcessing ? 'Procesando...' : 'Procesar Todo'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setUploadQueue([]),\n              className: \"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors duration-200\",\n              children: \"Limpiar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: uploadQueue.map((file, index) => /*#__PURE__*/_jsxDEV(FilePreview, {\n            file: file,\n            documentType: detectDocumentType(file),\n            onRemove: () => removeFromQueue(index),\n            onTypeChange: newType => {\n              // Aqu√≠ se podr√≠a implementar cambio de tipo\n              console.log(`Cambiar tipo de ${file.name} a ${newType}`);\n            }\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProcessingQueue, {\n      history: processingHistory,\n      onClear: clearHistory,\n      onRetry: historyItem => {\n        if (historyItem.status === 'failed') {\n          // Reintentar procesamiento\n          const file = new File([], historyItem.fileName);\n          processFile(file, historyItem.documentType);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"glass-card p-4\",\n      initial: {\n        opacity: 0,\n        y: 20\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      transition: {\n        delay: 0.5\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 md:grid-cols-4 gap-4 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-primary\",\n            children: uploadQueue.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600\",\n            children: \"En Cola\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-success\",\n            children: processingHistory.filter(h => h.status === 'completed').length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Completados\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-danger\",\n            children: processingHistory.filter(h => h.status === 'failed').length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Fallidos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-2xl font-bold text-warning\",\n            children: processingHistory.filter(h => h.status === 'processing').length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600\",\n            children: \"Procesando\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 304,\n    columnNumber: 5\n  }, this);\n};\n_s(DocumentUploader, \"FXFCloUJVvDfzF2Ky1jEt5tbgkU=\");\n_c = DocumentUploader;\nexport default DocumentUploader;\nvar _c;\n$RefreshReg$(_c, \"DocumentUploader\");","map":{"version":3,"names":["React","useState","useCallback","useRef","motion","AnimatePresence","nexcarApi","storageService","FilePreview","ProcessingQueue","jsxDEV","_jsxDEV","DocumentUploader","onDocumentProcessed","onError","className","_s","isDragActive","setIsDragActive","uploadQueue","setUploadQueue","processingHistory","setProcessingHistory","isProcessing","setIsProcessing","fileInputRef","onDrop","acceptedFiles","validFiles","filter","file","validation","validateFile","valid","error","prev","handleFileSelect","event","files","target","Array","from","handleDragOver","preventDefault","handleDragLeave","handleDrop","dataTransfer","processFile","documentType","historyId","Date","now","Math","random","toString","substr","historyItem","id","fileName","name","status","timestamp","uploadResult","uploadFile","progress","map","item","processedData","processDocument","url","vehicleDocument","mapToVehicleDocument","result","console","Error","message","_processedData$docume","_processedData$docume2","_processedData$fiscal","_processedData$userIn","_processedData$vehicl","_processedData$vehicl2","split","pop","extractedInfo","extractInfoFromFileName","type","issueDate","document_validity","issue_date","expiryDate","validity_date","issuerAuthority","fiscalInfo","issuing_authority","ownerName","userInfo","plateNumber","vehicleInfo","plate","vin","state","metadata","fileSize","size","mimeType","uploadDate","toISOString","rawOCRData","rawData","fileUrl","thumbnailUrl","yearMatch","match","year","parseInt","getFullYear","plateMatch","undefined","vinMatch","fileType","processQueue","length","batchSize","batches","i","push","slice","batch","Promise","all","detectDocumentType","toLowerCase","includes","removeFromQueue","index","_","clearHistory","children","div","onDragOver","onDragLeave","onClick","_fileInputRef$current","current","click","whileHover","scale","whileTap","ref","multiple","accept","onChange","_jsxFileName","lineNumber","columnNumber","initial","opacity","y","animate","transition","duration","height","exit","disabled","onRemove","onTypeChange","newType","log","history","onClear","onRetry","File","delay","h","_c","$RefreshReg$"],"sources":["/Users/maugudino/Desktop/Desarrollo/huecos_doc_v2/src/components/Upload/DocumentUploader.tsx"],"sourcesContent":["import React, { useState, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n// import { useDropzone } from 'react-dropzone';\nimport { DocumentType, VehicleDocument, ProcessingHistory } from '../../types/documents';\nimport { FileUploadResult, UploadProgress } from '../../services/api/storageService';\nimport { nexcarApi } from '../../services/api/nexcarApi';\nimport { storageService } from '../../services/api/storageService';\nimport { FilePreview } from './FilePreview';\nimport { ProcessingQueue } from './ProcessingQueue';\nimport { DOCUMENT_TYPES } from '../../constants/documentTypes';\n\ninterface DocumentUploaderProps {\n  onDocumentProcessed: (document: VehicleDocument) => void;\n  onError: (error: string) => void;\n  className?: string;\n}\n\nexport const DocumentUploader: React.FC<DocumentUploaderProps> = ({\n  onDocumentProcessed,\n  onError,\n  className = ''\n}) => {\n  const [isDragActive, setIsDragActive] = useState(false);\n  const [uploadQueue, setUploadQueue] = useState<File[]>([]);\n  const [processingHistory, setProcessingHistory] = useState<ProcessingHistory[]>([]);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Configuraci√≥n de dropzone\n  const onDrop = useCallback((acceptedFiles: File[]) => {\n    const validFiles = acceptedFiles.filter(file => {\n      const validation = storageService.validateFile(file);\n      if (!validation.valid) {\n        onError(validation.error || 'Archivo inv√°lido');\n        return false;\n      }\n      return true;\n    });\n\n    setUploadQueue(prev => [...prev, ...validFiles]);\n  }, [onError]);\n\n  // Simular dropzone sin la librer√≠a\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (files) {\n      onDrop(Array.from(files));\n    }\n  };\n\n  const handleDragOver = (event: React.DragEvent) => {\n    event.preventDefault();\n    setIsDragActive(true);\n  };\n\n  const handleDragLeave = (event: React.DragEvent) => {\n    event.preventDefault();\n    setIsDragActive(false);\n  };\n\n  const handleDrop = (event: React.DragEvent) => {\n    event.preventDefault();\n    setIsDragActive(false);\n    const files = event.dataTransfer.files;\n    if (files) {\n      onDrop(Array.from(files));\n    }\n  };\n\n  // Procesar archivo individual\n  const processFile = async (file: File, documentType: DocumentType): Promise<void> => {\n    const historyId = `processing_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    \n    // Agregar a historial\n    const historyItem: ProcessingHistory = {\n      id: historyId,\n      fileName: file.name,\n      documentType,\n      status: 'processing',\n      timestamp: new Date()\n    };\n    \n    setProcessingHistory(prev => [historyItem, ...prev]);\n\n    try {\n      // 1. Subir archivo\n      const uploadResult = await storageService.uploadFile(file, (progress) => {\n        // Actualizar progreso en historial\n        setProcessingHistory(prev => \n          prev.map(item => \n            item.id === historyId \n              ? { ...item, status: 'processing' as const }\n              : item\n          )\n        );\n      });\n\n      // 2. Procesar con API Nexcar\n      const processedData = await nexcarApi.processDocument(uploadResult.url, documentType);\n\n      // 3. Mapear a VehicleDocument\n      const vehicleDocument = mapToVehicleDocument(processedData, documentType, uploadResult);\n\n      // 4. Actualizar historial como completado\n      setProcessingHistory(prev => \n        prev.map(item => \n          item.id === historyId \n            ? { ...item, status: 'completed', result: vehicleDocument }\n            : item\n        )\n      );\n\n      // 5. Notificar al componente padre\n      onDocumentProcessed(vehicleDocument);\n\n    } catch (error) {\n      console.error('Error procesando archivo:', error);\n      \n      // Actualizar historial como fallido\n      setProcessingHistory(prev => \n        prev.map(item => \n          item.id === historyId \n            ? { ...item, status: 'failed', error: error instanceof Error ? error.message : 'Error desconocido' }\n            : item\n        )\n      );\n\n      onError(`Error procesando ${file.name}: ${error instanceof Error ? error.message : 'Error desconocido'}`);\n    }\n  };\n\n  // Mapear datos procesados a VehicleDocument\n  const mapToVehicleDocument = (\n    processedData: any, \n    documentType: DocumentType, \n    uploadResult: FileUploadResult\n  ): VehicleDocument => {\n    const now = new Date();\n    \n    // Extraer informaci√≥n del nombre del archivo para datos m√°s realistas\n    const fileName = uploadResult.url.split('/').pop() || '';\n    const extractedInfo = extractInfoFromFileName(fileName, documentType);\n    \n    return {\n      id: `doc_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      type: documentType,\n      issueDate: processedData.document_validity?.issue_date \n        ? new Date(processedData.document_validity.issue_date)\n        : extractedInfo.issueDate || now,\n      expiryDate: processedData.document_validity?.validity_date\n        ? new Date(processedData.document_validity.validity_date)\n        : extractedInfo.expiryDate,\n      issuerAuthority: processedData.fiscalInfo?.issuing_authority || extractedInfo.issuerAuthority || 'Autoridad no especificada',\n      ownerName: processedData.userInfo?.name || extractedInfo.ownerName || 'Propietario no identificado',\n      plateNumber: processedData.vehicleInfo?.plate || extractedInfo.plateNumber,\n      vin: processedData.vehicleInfo?.vin || extractedInfo.vin,\n      state: (extractedInfo.state as any) || 'Ciudad de M√©xico',\n      status: (extractedInfo.status as any) || 'valid',\n      metadata: {\n        ...processedData.vehicleInfo,\n        ...processedData.fiscalInfo,\n        ...extractedInfo.metadata,\n        fileSize: uploadResult.size,\n        mimeType: uploadResult.mimeType,\n        uploadDate: now.toISOString(),\n        fileName: fileName\n      },\n      rawOCRData: processedData.rawData,\n      fileUrl: uploadResult.url,\n      thumbnailUrl: uploadResult.thumbnailUrl\n    };\n  };\n\n  // Extraer informaci√≥n b√°sica del archivo real\n  const extractInfoFromFileName = (fileName: string, documentType: DocumentType) => {\n    // Extraer a√±o del nombre del archivo\n    const yearMatch = fileName.match(/(20\\d{2})/);\n    const year = yearMatch ? parseInt(yearMatch[1]) : new Date().getFullYear();\n    \n    // Extraer placa del nombre del archivo\n    const plateMatch = fileName.match(/([A-Z]{3}-?\\d{3})/);\n    const plateNumber = plateMatch ? plateMatch[1] : undefined;\n    \n    // Extraer VIN del nombre del archivo\n    const vinMatch = fileName.match(/([A-Z0-9]{17})/);\n    const vin = vinMatch ? vinMatch[1] : undefined;\n    \n    // Datos b√°sicos extra√≠dos del archivo real\n    const ownerName = 'Propietario Detectado';\n    const issuerAuthority = 'Autoridad no especificada';\n    const issueDate = new Date();\n    const expiryDate = undefined;\n    const status = 'valid';\n    const metadata = {\n      fileName: fileName,\n      uploadDate: new Date().toISOString(),\n      fileType: documentType\n    };\n    \n    return {\n      ownerName,\n      issuerAuthority,\n      issueDate,\n      expiryDate,\n      plateNumber: plateNumber || undefined,\n      vin: vin || undefined,\n      state: 'Ciudad de M√©xico' as any,\n      status: status as any,\n      metadata\n    };\n  };\n\n  // Procesar cola de archivos\n  const processQueue = async () => {\n    if (uploadQueue.length === 0) return;\n\n    setIsProcessing(true);\n    \n    try {\n      // Procesar archivos en lotes de 3\n      const batchSize = 3;\n      const batches = [];\n      \n      for (let i = 0; i < uploadQueue.length; i += batchSize) {\n        batches.push(uploadQueue.slice(i, i + batchSize));\n      }\n\n      for (const batch of batches) {\n        await Promise.all(\n          batch.map(async (file) => {\n            // Detectar tipo de documento autom√°ticamente\n            const documentType = detectDocumentType(file);\n            await processFile(file, documentType);\n          })\n        );\n      }\n\n      // Limpiar cola\n      setUploadQueue([]);\n      \n    } catch (error) {\n      console.error('Error procesando cola:', error);\n      onError('Error procesando la cola de archivos');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Detectar tipo de documento autom√°ticamente\n  const detectDocumentType = (file: File): DocumentType => {\n    const fileName = file.name.toLowerCase();\n    \n    // Patrones de detecci√≥n basados en nombre de archivo\n    if (fileName.includes('factura') || fileName.includes('invoice') || fileName.includes('autotal')) {\n      if (fileName.includes('endoso') || fileName.includes('endorsed')) {\n        return 'factura_endosada';\n      }\n      return 'factura_origen';\n    }\n    \n    if (fileName.includes('tarjeta') || fileName.includes('circulacion') || fileName.includes('circulation') || fileName.includes('sug2403')) {\n      return 'tarjeta_circulacion';\n    }\n    \n    if (fileName.includes('tenencia') || fileName.includes('tax')) {\n      return 'tenencia';\n    }\n    \n    if (fileName.includes('refrendo') || fileName.includes('renewal')) {\n      return 'refrendo';\n    }\n    \n    if (fileName.includes('verificacion') || fileName.includes('verification')) {\n      return 'verificacion';\n    }\n    \n    if (fileName.includes('multa') || fileName.includes('fine')) {\n      return 'multa';\n    }\n    \n    if (fileName.includes('contrato') || fileName.includes('contract')) {\n      return 'contrato_compraventa';\n    }\n    \n    if (fileName.includes('seguro') || fileName.includes('insurance')) {\n      return 'poliza_seguro';\n    }\n    \n    // Por defecto, factura de origen\n    return 'factura_origen';\n  };\n\n  // Eliminar archivo de la cola\n  const removeFromQueue = (index: number) => {\n    setUploadQueue(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Limpiar historial\n  const clearHistory = () => {\n    setProcessingHistory([]);\n  };\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Zona de Drop */}\n      <motion.div\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={handleDrop}\n        onClick={() => fileInputRef.current?.click()}\n        className={`\n          relative border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-300\n          ${isDragActive \n            ? 'border-primary bg-primary/10 scale-105' \n            : 'border-gray-300 hover:border-primary hover:bg-gray-50'\n          }\n        `}\n        whileHover={{ scale: 1.02 }}\n        whileTap={{ scale: 0.98 }}\n      >\n        <input \n          ref={fileInputRef}\n          type=\"file\"\n          multiple\n          accept=\"image/*,application/pdf\"\n          onChange={handleFileSelect}\n          className=\"hidden\"\n        />\n        \n        <motion.div\n          className=\"space-y-4\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.3 }}\n        >\n          <div className=\"text-6xl\">\n            {isDragActive ? 'üìÅ' : 'üìÑ'}\n          </div>\n          \n          <div>\n            <h3 className=\"text-xl font-semibold text-gray-800 mb-2\">\n              {isDragActive \n                ? 'Suelta los archivos aqu√≠' \n                : 'Arrastra archivos aqu√≠ o haz clic para seleccionar'\n              }\n            </h3>\n            <p className=\"text-gray-600\">\n              Soporta JPG, PNG y PDF (m√°ximo 10MB por archivo)\n            </p>\n          </div>\n          \n          <div className=\"flex justify-center space-x-4 text-sm text-gray-500\">\n            <span>üìÑ Facturas</span>\n            <span>üÜî Tarjetas de Circulaci√≥n</span>\n            <span>üí∞ Tenencias</span>\n            <span>üå± Verificaciones</span>\n          </div>\n        </motion.div>\n      </motion.div>\n\n      {/* Cola de Archivos */}\n      <AnimatePresence>\n        {uploadQueue.length > 0 && (\n          <motion.div\n            className=\"glass-card p-6\"\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.3 }}\n          >\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-800\">\n                Archivos en Cola ({uploadQueue.length})\n              </h3>\n              <div className=\"flex space-x-2\">\n                <button\n                  onClick={processQueue}\n                  disabled={isProcessing}\n                  className=\"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200\"\n                >\n                  {isProcessing ? 'Procesando...' : 'Procesar Todo'}\n                </button>\n                <button\n                  onClick={() => setUploadQueue([])}\n                  className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors duration-200\"\n                >\n                  Limpiar\n                </button>\n              </div>\n            </div>\n            \n            <div className=\"space-y-2\">\n              {uploadQueue.map((file, index) => (\n                <FilePreview\n                  key={index}\n                  file={file}\n                  documentType={detectDocumentType(file)}\n                  onRemove={() => removeFromQueue(index)}\n                  onTypeChange={(newType) => {\n                    // Aqu√≠ se podr√≠a implementar cambio de tipo\n                    console.log(`Cambiar tipo de ${file.name} a ${newType}`);\n                  }}\n                />\n              ))}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Historial de Procesamiento */}\n      <ProcessingQueue\n        history={processingHistory}\n        onClear={clearHistory}\n        onRetry={(historyItem) => {\n          if (historyItem.status === 'failed') {\n            // Reintentar procesamiento\n            const file = new File([], historyItem.fileName);\n            processFile(file, historyItem.documentType);\n          }\n        }}\n      />\n\n      {/* Estad√≠sticas */}\n      <motion.div\n        className=\"glass-card p-4\"\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.5 }}\n      >\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-center\">\n          <div>\n            <div className=\"text-2xl font-bold text-primary\">{uploadQueue.length}</div>\n            <div className=\"text-sm text-gray-600\">En Cola</div>\n          </div>\n          <div>\n            <div className=\"text-2xl font-bold text-success\">\n              {processingHistory.filter(h => h.status === 'completed').length}\n            </div>\n            <div className=\"text-sm text-gray-600\">Completados</div>\n          </div>\n          <div>\n            <div className=\"text-2xl font-bold text-danger\">\n              {processingHistory.filter(h => h.status === 'failed').length}\n            </div>\n            <div className=\"text-sm text-gray-600\">Fallidos</div>\n          </div>\n          <div>\n            <div className=\"text-2xl font-bold text-warning\">\n              {processingHistory.filter(h => h.status === 'processing').length}\n            </div>\n            <div className=\"text-sm text-gray-600\">Procesando</div>\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\nexport default DocumentUploader;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}